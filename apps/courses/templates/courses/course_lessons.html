{% extends "base.html" %}
{% load static %}

{% block title %} Lecciones {% endblock title %}

{% block custom_styles %}
  <link rel="stylesheet" href="{% static 'css/lessons.css' %}">
{% endblock custom_styles %}

{% block content %}

  <!-- HEADER SUPERIOR -->
  <header class="topbar">
    <div class="acciones">
      <div class="back-link"> <a href="{{ request.META.HTTP_REFERRER }}" class="discusiones">&larr; Ve al panel de control</a></div>

    </div>
    <div class="logo"><img src="{% static "images/devilearn.png" %}" alt="Logo devilearn"></div>
  </header>

  <!-- LAYOUT PRINCIPAL -->
  <div class="layout">
    <!-- SIDEBAR IZQUIERDA -->
    <aside class="sidebar">


      <h1 class="course-title">{{ course_title }}</h1>
      <p class="progress">{{ lesson.course_progress }}% completado</p>


      <input class="lesson-search" placeholder="Buscar...">
      <option>Buscar por título de lección</option>
    </select>

    {% comment %} Secciones {% endcomment %}
    <div class="accordion">

      {% for module in modules %}

        <div class="accordion-item">
          {% comment %} TODO: Ver cuantas lecciones ya he completado {% endcomment %}
          <button class="accordion-header">Sección {{ forloop.counter }}: {{ module.title }} <span>{{ module.completed_count }} / {{ module.total_count }}</span></button>
          <div class="accordion-content">
            <ul>

              {% for content in module.contents.all %}
                <li>{{ content.item.title }}</li>
              {% endfor %}

            </ul>
          </div>
        </div>

      {% endfor %}

    </div>
  </aside>

    <!-- CONTENIDO PRINCIPAL (VIDEO) -->
  <main class="main-content">
    <div class="content-header">Introducción al curso</div>
    <div class="video-wrapper">
      <video controls
             poster="https://placehold.co/800x450?text=Este+curso+est%C3%A1+en+proceso+de+construcci%C3%B3n">
        <source src="video-demo.mp4" type="video/mp4">
        Tu navegador no soporta videos.
      </video>
    </div>
    <div class="bottom-bar">
      <button class="btn-complete">COMPLETAR Y CONTINUAR →</button>
    </div>
  </main>

  </div>

{% endblock content %}

{% block scripts %}
  <script src="{% static 'js/multimedia.js' %}"></script>
{% endblock scripts %}