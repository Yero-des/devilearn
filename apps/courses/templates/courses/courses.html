{% extends "base.html" %}
{% load static %}

{% block title %}Cursos{% endblock title %}

{% block custom_styles %}
  <link rel="stylesheet" href='{% static "css/styles.css" %}'>
{% endblock custom_styles %}

{% block content %}

  <div class="layout">

    {% comment %} Sidebar {% endcomment %}
    {% include "includes/sidebar.html" %}

    <!-- Main content -->
    <div class="main-content">

      {% comment %} Header {% endcomment %}
      {% include "includes/header.html" %}

      <!-- Aquí va el contenido de la página -->
      <main>
        <!-- === COURSE CARDS === -->

        <div class="carousel-wrapper">
          <div class="course-grid">

            {% for course in courses %}

              <div class="course-card">
                <a href="{% url 'student:course_detail' slug=course.slug %}">
                  <img src="{{ course.image }}" alt="Course Image" class="course-img" />
                  <div class="course-info">
                    <div class="course-rating">
                      <span class="tag beginner">{{ course.level }}</span>
                      <div class="course-meta">
                        <span><i class="fa-solid fa-star"></i> {{ course.rating }}</span>
                      </div>
                    </div>

                    <h3 class="course-title">{{ course.title }}</h3>
                    <div class="author">
                      {% if course.owner.photo %}
                        <img src="{{ course.owner.photo.url }}" alt="{{ course.owner.get_full_name }}">
                      {% else %}
                        <img src="https://static.vecteezy.com/system/resources/previews/009/292/244/non_2x/default-avatar-icon-of-social-media-user-vector.jpg" alt="{{ course.owner.get_full_name }}">                              
                      {% endif %}
                      <span>{{ course.owner.get_full_name }}</span>
                    </div>
                  </div>

                </a>
              </div>

            {% endfor %}

          </div>

          <div class="paginator">


            {% if page_obj.has_previous %}
              <a href="?page=1&{{query_string}}">Primera</a>
              <a href="?page={{page_obj.previous_page_number}}&{{query_string}}">Anterior</a>
            {% endif %}

            <span>Pagina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>

            {% if page_obj.has_next %}
              <a href="?page={{page_obj.next_page_number}}&{{query_string}}">Siguiente</a>
              <a href="?page={{page_obj.paginator.num_pages}}&{{query_string}}">Ultima</a>
            {% endif %}

          </div>

        </div>

      </main>
    </div>
  </div>

{% endblock content %}

{% block scripts %}
  <script src="{% static 'js/script.js' %}"></script>
{% endblock scripts %}
